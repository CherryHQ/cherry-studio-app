diff --git a/src/lib/CodeHighlighter.tsx b/src/lib/CodeHighlighter.tsx
index c5fb4175f84136636dcfa8a45b3ee881b33beabc..e7fd6ee74f01028715a920e7d261700bb20f2066 100644
--- a/src/lib/CodeHighlighter.tsx
+++ b/src/lib/CodeHighlighter.tsx
@@ -23,6 +23,11 @@ export interface CodeHighlighterProps extends SyntaxHighlighterProps {
 	hljsStyle: ReactStyle;
 	textStyle?: StyleProp<TextStyle>;
 	scrollViewProps?: ScrollViewProps;
+	/**
+	 * Enable horizontal scrolling for long lines. Set to false to wrap text.
+	 * @default true
+	 */
+	horizontal?: boolean;
 	/**
 	 * @deprecated Use scrollViewProps.contentContainerStyle instead
 	 */
@@ -34,6 +39,7 @@ export const CodeHighlighter: FunctionComponent<CodeHighlighterProps> = ({
 	textStyle,
 	hljsStyle,
 	scrollViewProps,
+	horizontal = true,
 	containerStyle,
 	...rest
 }) => {
@@ -73,21 +79,68 @@ export const CodeHighlighter: FunctionComponent<CodeHighlighterProps> = ({
 		}, []);
 
 	const renderer = (props: rendererProps) => {
-		const { rows } = props;
+	const { rows } = props;
+	const lineNumbers = rest.lineNumbers;
+	const codeLines = rows.map((row, rowIndex) => {
 		return (
-			<ScrollView
-				{...scrollViewProps}
-				horizontal
-				contentContainerStyle={[
-					stylesheet.hljs,
-					scrollViewProps?.contentContainerStyle,
-					containerStyle,
-				]}
-			>
-				<View onStartShouldSetResponder={() => true}>{renderNode(rows)}</View>
-			</ScrollView>
+			<View key={`line-container-${rowIndex}`} style={{ flexDirection: 'row' }}>
+				{/* 行号 - 仅当 showLineNumbers 为 true 时显示 */}
+				{lineNumbers && (
+					<View style={{
+						
+						paddingRight: 10,
+						backgroundColor: '#f5f5f5',
+						borderRightWidth: 1,
+						borderRightColor: '#ddd',
+						width: 40,
+						alignItems: 'center',
+						justifyContent: 'center',
+					}}>
+						<Text style={{
+							color: '#666',
+							fontSize: 14,
+							fontWeight: '400',
+							includeFontPadding: false,
+						}}>
+							{rowIndex + 1}
+						</Text>
+					</View>
+				)}
+
+				{/* 代码内容 */}
+				<View style={{ flex: 1, paddingLeft: lineNumbers ? 10 : 0 }}>
+					<Text style={[
+						textStyle,
+						{
+							color: stylesheet.hljs?.color,
+							lineHeight: 20,
+							includeFontPadding: false,
+						}
+					]}>
+						{row.value ? trimNewlines(String(row.value)) : ''}
+						{row.children && renderNode(row.children, `row_${rowIndex}`)}
+					</Text>
+				</View>
+			</View>
 		);
-	};
+	});
+	
+	return (
+		<ScrollView
+			{...scrollViewProps}
+			horizontal={horizontal}
+			contentContainerStyle={[
+				stylesheet.hljs,
+				scrollViewProps?.contentContainerStyle,
+				containerStyle,
+			]}
+		>
+			<View>
+				{codeLines}
+			</View>
+		</ScrollView>
+	);
+};
 
 	return (
 		<SyntaxHighlighter
@@ -97,6 +150,7 @@ export const CodeHighlighter: FunctionComponent<CodeHighlighterProps> = ({
 			PreTag={View}
 			style={{}}
 			testID="react-native-code-highlighter"
+	
 		>
 			{children}
 		</SyntaxHighlighter>
